# ======================
# Debian / Ubuntu â†’ Docker
# ======================
- name: Preinstall for Debian family OS
  when: ansible_os_family == "Debian"
  block:
    - name: Add user to docker group
      ansible.builtin.user:
        name: "{{ item }}"
        groups: docker
        append: yes
      loop: "{{docker_users}}"

    - name: Verify Docker installation
      ansible.builtin.command: docker --version
      register: docker_version
      changed_when: false

    - name: Show Docker version
      ansible.builtin.debug:
        msg: "{{ docker_version.stdout }}"